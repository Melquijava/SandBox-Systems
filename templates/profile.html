<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Perfil de {{ username }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body class="dashboard-body">
    <div class="profile-page">
        <header class="profile-header">
            <img src="{{ profile.avatar_url or url_for('static', filename='images/default_avatar.png') }}" alt="Avatar de {{ username }}" class="profile-avatar">
            <h1>{{ username }}</h1>
            <p class="profile-bio">{{ profile.bio }}</p>
        </header>

        <main class="dashboard-container">
            <h2>Projetos Públicos</h2>
            <div class="project-grid">
                {% for project_id, project in projects.items() %}
                <div class="project-card">
                    <h3>{{ project.name }}</h3>
                    <div class="preview-container">
                        <iframe class="project-preview-frame" scrolling="no" srcdoc="<html><head><style>${project.css}</style></head><body style='transform: scale(0.5); transform-origin: top left; width: 200%; height: 200%; overflow: hidden;'>${project.html}</body></html>"></iframe>
                    </div>
                    <div class="card-actions">
                        <a href="{{ url_for('view', project_id=project_id) }}" target="_blank" class="action-button view-button">Ver Projeto</a>
                    </div>
                </div>
                {% else %}
                <p>{{ username }} ainda não tornou nenhum projeto público.</p>
                {% endfor %}
            </div>
        </main>
    </div>
</body>
</html>